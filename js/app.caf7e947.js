(function(t){function e(e){for(var a,r,u=e[0],l=e[1],s=e[2],c=0,d=[];c<u.length;c++)r=u[c],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);h&&h(e);while(d.length)d.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,r=1;r<n.length;r++){var u=n[r];0!==i[u]&&(a=!1)}a&&(o.splice(e--,1),t=l(l.s=n[0]))}return t}var a={},r={app:0},i={app:0},o=[];function u(t){return l.p+"js/"+({about:"about"}[t]||t)+"."+{about:"a845bdc6","chunk-260da074":"4bd2cb80","chunk-c45dd6bc":"e6534650","chunk-cb4f1d32":"c283c34f"}[t]+".js"}function l(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(t){var e=[],n={"chunk-260da074":1,"chunk-c45dd6bc":1,"chunk-cb4f1d32":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var a="css/"+({about:"about"}[t]||t)+"."+{about:"31d6cfe0","chunk-260da074":"8d9ac8e1","chunk-c45dd6bc":"a69cd52c","chunk-cb4f1d32":"fa6fa5da"}[t]+".css",i=l.p+a,o=document.getElementsByTagName("link"),u=0;u<o.length;u++){var s=o[u],c=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(c===a||c===i))return e()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){s=d[u],c=s.getAttribute("data-href");if(c===a||c===i)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var a=e&&e.target&&e.target.src||i,o=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete r[t],h.parentNode.removeChild(h),n(o)},h.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){r[t]=0})));var a=i[t];if(0!==a)if(a)e.push(a[2]);else{var o=new Promise((function(e,n){a=i[t]=[e,n]}));e.push(a[2]=o);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=u(t);var d=new Error;s=function(e){c.onerror=c.onload=null,clearTimeout(h);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}i[t]=void 0}};var h=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(e)},l.m=t,l.c=a,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)l.d(n,a,function(e){return t[e]}.bind(null,a));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/",l.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var d=0;d<s.length;d++)e(s[d]);var h=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("1356"),r=n.n(a);r.a},"095b":function(t,e,n){},1356:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"app"}},[n("Header"),n("router-view")],1)},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.$auth.loading?t._e():a("header",{staticStyle:{display:"flex"}},[a("img",{attrs:{height:"80%",src:n("cf05")}}),t.$auth.isAuthenticated?a("router-link",{attrs:{to:"/app"}},[t._v("Home")]):t._e(),t.$auth.isAuthenticated?a("router-link",{attrs:{to:"/about"}},[t._v("About")]):t._e(),a("div",{staticStyle:{flex:"2"}}),a("Profile")],1)},u=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.$auth.isAuthenticated?n("div",[n("div",{staticClass:"profile"},[n("div",{},[n("h4",[t._v(t._s(t.$auth.user.name))]),n("small",[t._v(t._s(t.$auth.user.email))])]),n("img",{attrs:{src:t.$auth.user.picture}}),t.$auth.isAuthenticated?n("v-btn",{staticStyle:{margin:"0 12px"},attrs:{depressed:"",small:""},on:{click:t.logout}},[t._v("Log out")]):t._e()],1)]):n("div",{},[n("v-btn",{staticStyle:{margin:"0 12px"},on:{click:t.login}},[t._v("login")])],1)},s=[],c={methods:{login(){this.$auth.loginWithRedirect()},logout(){this.$auth.logout({returnTo:window.location.origin})}}},d=c,h=(n("d44b"),n("2877")),p=n("6544"),f=n.n(p),m=n("8336"),g=Object(h["a"])(d,l,s,!1,null,null,null),v=g.exports;f()(g,{VBtn:m["a"]});var y={components:{Profile:v}},b=y,w=(n("6c3e"),Object(h["a"])(b,o,u,!1,null,null,null)),k=w.exports,_={components:{Header:k}},C=_,O=(n("034f"),n("7496")),x=Object(h["a"])(C,r,i,!1,null,null,null),A=x.exports;f()(x,{VApp:O["a"]});var T=n("f309");a["a"].use(T["a"]);var S=new T["a"]({icons:{iconfont:"mdi"}}),P=n("1321"),$=n.n(P),E=n("2f62"),j=n("c1df"),D=n.n(j);function R(t){const e=Date.now();let n=D()();return n="daily"===t?n.add(1,"day"):"weekly"===t?n.add(1,"week"):"mountly"===t?n.add(1,"M"):"quarterly"===t?n.add(3,"M"):"yearly"===t?n.add(1,"Y"):n.add(1,"day"),n.format("x")-e}function U(t,e,n){let a={};for(const{start:r,amount:i}of t)a[r]=a[r]?a[r]+i:i;return Object.keys(a).map(t=>({amount:a[t],start:parseInt(t)})).filter(({start:t})=>t>=e&&t<=n).sort((t,e)=>t.start>e.start?1:-1)}a["a"].use(E["a"]);var L=new E["a"].Store({state:{from:Date.now(),to:D()().add(1,"year").format("x"),events:[]},mutations:{select(t,{from:e,to:n}){t.from=new Date(e).getTime(),t.to=new Date(n).getTime()},remove(t,e){t.events.splice(e,1)},addtool(t,{name:e,children:n,start:a}){t.events.unshift({type:"tool",name:e,children:n,start:new Date(a).getTime(),display:!0})},editevent(t,{index:e,key:n,value:a}){t.events=t.events.map((t,r)=>r===e?{...t,[n]:a}:t)},addevent(t,{name:e,amount:n,start:a,repeat:r}){t.events.unshift({type:"simple",name:e,repeat:r,amount:parseInt(n),start:new Date(a).getTime(),display:!0})},display(t,e){t.events=t.events.map((t,n)=>({...t,display:e===n?!t.display:t.display}))}},getters:{repeats(){return["daily","weekly","mountly","quarterly","yearly"]},series({events:t,from:e,to:n}){let a=t.filter(({type:t,display:e})=>"simple"===t&&e).sort((t,e)=>t.start>e.start?1:-1);const r=a.filter(({repeat:t})=>t);for(const u of r){let t=[];while(!t.length||t[t.length-1].start<n)t.push({amount:u.amount,start:u.start+R(u.repeat)*(t.length+1)});a=[...a,...t]}for(const u of t.filter(({type:t,display:e})=>"tool"===t&&e))a=[...a,...Array.from(u.children)];let i=U(a.filter(({amount:t})=>t>0),e,n),o=U(a.filter(({amount:t})=>t<0),e,n);return[{name:"Остаток",data:U(a,new Date("1970-01-01").getTime(),n).reduce((t,{amount:e,start:n})=>[...t,t.length?[n,t[t.length-1][1]+e]:[n,e]],[]).filter(([t])=>t>=e&&t<=n)},{name:"Приход",data:i.map(({amount:t,start:e})=>[e,t])},{name:"Расход",data:o.map(({amount:t,start:e})=>[e,Math.abs(t)])}]}}}),M=(n("bf40"),n("d1e7"),n("8c4f")),W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[t._v("\n  weclome to cashflow service\n")])},I=[],N={computed:{isAuth(){return this.$auth.isAuthenticated}},watch:{isAuth(t,e){!0===t&&!1===e&&this.$router.push("/app")}}},q=N,B=Object(h["a"])(q,W,I,!1,null,null,null),H=B.exports,J=n("5891"),V=n.n(J);const Y=()=>window.history.replaceState({},document.title,window.location.pathname);let z;const F=()=>z,G=({onRedirectCallback:t=Y,redirectUri:e=window.location.origin,...n})=>{return z||(z=new a["a"]({data(){return{loading:!0,isAuthenticated:!1,user:{},auth0Client:null,popupOpen:!1,error:null}},methods:{async loginWithPopup(t){this.popupOpen=!0;try{await this.auth0Client.loginWithPopup(t)}catch(e){console.error(e)}finally{this.popupOpen=!1}this.user=await this.auth0Client.getUser(),this.isAuthenticated=!0},async handleRedirectCallback(){this.loading=!0;try{await this.auth0Client.handleRedirectCallback(),this.user=await this.auth0Client.getUser(),this.isAuthenticated=!0}catch(t){this.error=t}finally{this.loading=!1}},loginWithRedirect(t){return this.auth0Client.loginWithRedirect(t)},getIdTokenClaims(t){return this.auth0Client.getIdTokenClaims(t)},getTokenSilently(t){return this.auth0Client.getTokenSilently(t)},getTokenWithPopup(t){return this.auth0Client.getTokenWithPopup(t)},logout(t){return this.auth0Client.logout(t)}},async created(){this.auth0Client=await V()({domain:n.domain,client_id:n.clientId,audience:n.audience,redirect_uri:e});try{if(window.location.search.includes("code=")&&window.location.search.includes("state=")){const{appState:e}=await this.auth0Client.handleRedirectCallback();t(e)}}catch(a){this.error=a}finally{this.isAuthenticated=await this.auth0Client.isAuthenticated(),this.user=await this.auth0Client.getUser(),this.loading=!1}}}),z)},K={install(t,e){t.prototype.$auth=G(e)}},Q=(t,e,n)=>{const a=F(),r=()=>{if(a.isAuthenticated)return n();a.loginWithRedirect({appState:{targetUrl:t.fullPath}})};if(!a.loading)return r();a.$watch("loading",t=>{if(!1===t)return r()})};a["a"].use(M["a"]);var X=new M["a"]({base:"/",routes:[{path:"/",name:"home",component:H},{path:"/app",name:"dashboard",component:()=>Promise.all([n.e("chunk-260da074"),n.e("chunk-c45dd6bc")]).then(n.bind(null,"7277")),beforeEnter:Q},{path:"/add",name:"add",component:()=>Promise.all([n.e("chunk-260da074"),n.e("chunk-cb4f1d32")]).then(n.bind(null,"7e55")),beforeEnter:Q},{path:"/about",name:"about",component:()=>n.e("about").then(n.bind(null,"f820"))}]}),Z=n("8160");a["a"].use(K,{domain:Z["b"],clientId:Z["a"],onRedirectCallback:t=>{X.push(t&&t.targetUrl?t.targetUrl:window.location.pathname)}}),a["a"].config.productionTip=!1,a["a"].use($.a),a["a"].component("apexchart",$.a),new a["a"]({vuetify:S,store:L,router:X,render:t=>t(A)}).$mount("#app")},"6c3e":function(t,e,n){"use strict";var a=n("095b"),r=n.n(a);r.a},8160:function(t){t.exports=JSON.parse('{"b":"arsenicum32.auth0.com","a":"R8TVlzYmLuL8I2M0h51f2ugz3YW9gavG"}')},cf05:function(t,e,n){t.exports=n.p+"img/logo.ba592ffe.png"},d44b:function(t,e,n){"use strict";var a=n("eacf"),r=n.n(a);r.a},e247:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="e247"},eacf:function(t,e,n){}});
//# sourceMappingURL=app.caf7e947.js.map